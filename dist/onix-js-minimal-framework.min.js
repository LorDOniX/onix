/**
 * OnixJS framework
 * 2.7.0/1. 7. 2016
 * source: https://gitlab.com/LorDOniX/onix
 * documentation: https://gitlab.com/LorDOniX/onix/tree/master/docs
 * minimal version: contains [src/libs/polyfills.js, src/onix/onix.js, src/onix/filter.js]
 * @license MIT
 * - Free for use in both personal and commercial projects
 */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};if(function(){Event=Event||window.Event,Event.prototype.stopPropagation=Event.prototype.stopPropagation||function(){this.cancelBubble=!0},Event.prototype.preventDefault=Event.prototype.preventDefault||function(){this.returnValue=!1}}(),"btoa"in window||(window.btoa=function(e){return e}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.every||(Array.prototype.every=function(e,t){for(var n=this.length,r=0;n>r;r++)if(r in this&&!e.call(t,this[r],r,this))return!1;return!0}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n=this.length,r=t||0;for(0>r&&(r+=n);n>r;r++)if(r in this&&this[r]===e)return r;return-1}),!("console"in window)){var emptyFn=function(){};window.console={},["log","warn","error","clear","info"].forEach(function(e){window.console[e]=emptyFn})}if(Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!==("undefined"==typeof o?"undefined":_typeof(o))&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,c,a=[];for(i in o)e.call(o,i)&&a.push(i);if(t)for(c=0;r>c;c++)e.call(o,n[c])&&a.push(n[c]);return a}}()),function(){if(navigator.appVersion.indexOf("MSIE 8")>0){var e=Array.prototype.slice;Array.prototype.slice=function(){if(this instanceof Array)return e.apply(this,arguments);for(var t=[],n=arguments.length>=1?arguments[0]:0,r=arguments.length>=2?arguments[1]:this.length,o=n;r>o;o++)t.push(this[o]);return t}}}(),Object.create||(Object.create=function(e){if(arguments.length>1)throw new Error("Object.create polyfill only accepts the first parameter");var t=function(){};return t.prototype=e,new t}),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),!("addEventListener"in document)){var w=Window.prototype,h=HTMLDocument.prototype,e=Element.prototype;document.addEventListener=w.addEventListener=h.addEventListener=e.addEventListener=function(e,t){if(this.__eventListeners||(this.__eventListeners={}),"DOMContentLoaded"==e)this.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t()});else{this.__eventListeners[e]||(this.__eventListeners[e]=[]);var n=function(){return t.apply(this,arguments)}.bind(this);this.__eventListeners[e].push({fn:n,listener:t}),this.attachEvent("on"+e,n)}},document.removeEventListener=w.removeEventListener=h.removeEventListener=e.removeEventListener=function(e,t){for(var n=this.__eventListeners||{},r=n[e]||[],o=null,i=-1,c=0;c<r.length;c++){var a=r[c];if(a.listener==t){o=a.fn,i=c;break}}return o?(r.splice(i,1),r.length||delete n[e],this.detachEvent("on"+e,o)):null}}"classList"in document.documentElement||!window.Element||!function(){function e(e){if(this._element=e,e.className!=this._classCache&&(this._classCache=e.className,this._classCache))for(var t=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<t.length;n++)c.call(this,t[n])}function t(e,t){e.className=t.join(" ")}function n(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{get:n}):e.__defineGetter__(t,n)}var r=Array.prototype,o=r.indexOf,i=r.slice,c=r.push,a=r.splice,s=r.join;window.DOMTokenList=e,e.prototype={add:function(e){this.contains(e)||(c.call(this,e),t(this._element,i.call(this,0)))},contains:function(e){return-1!=o.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var n=o.call(this,e);-1!=n&&(a.call(this,n,1),t(this._element,i.call(this,0)))},toString:function(){return s.call(this," ")},toggle:function(e){return-1==o.call(this,e)?(this.add(e),!0):(this.remove(e),!1)}},n(Element.prototype,"classList",function(){return new e(this)})}(),Date.now||(Date.now=function(){return+new Date});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();onix=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._objects={},this._runs=[],this._configs=[],this._name=t||"",this._dependencies=n||[]}return _createClass(e,[{key:"getDependencies",value:function(){return this._dependencies}},{key:"getName",value:function(){return this._name}},{key:"getConfigs",value:function(){return this._configs}},{key:"getRuns",value:function(){return this._runs}},{key:"getObjects",value:function(){return this._objects}},{key:"provider",value:function(t,n){if(!t||!n)return this;var r=e.parseParam(n);return this._objects[t+e.CONST.PROVIDER_NAME]={name:t+e.CONST.PROVIDER_NAME,inject:r.inject,fn:r.fn,cache:null,type:e.CONST.TYPE.PROVIDER},this._objects[t]={name:t,inject:null,fn:null,cache:null,provider:t+e.CONST.PROVIDER_NAME,type:e.CONST.TYPE.FACTORY},this}},{key:"service",value:function(t,n){if(!t||!n)return this;var r=e.parseParam(n);return this._objects[t]={name:t,inject:r.inject,fn:r.fn,cache:null,type:e.CONST.TYPE.SERVICE},this}},{key:"factory",value:function(t,n){if(!t||!n)return this;var r=e.parseParam(n);return this._objects[t]={name:t,inject:r.inject,fn:r.fn,cache:null,type:e.CONST.TYPE.FACTORY},this}},{key:"constant",value:function(t,n){return t&&n?(this._objects[t]={name:t,cache:n,type:e.CONST.TYPE.CONSTANT},this):this}},{key:"value",value:function(t,n){return t&&n?(this._objects[t]={name:t,cache:n,type:e.CONST.TYPE.VALUE},this):this}},{key:"filter",value:function(t,n){if(!t||!n)return this;var r=e.parseParam(n);return this._objects[e.getFilterName(t)]={name:t,inject:r.inject,fn:r.fn,cache:null,type:e.CONST.TYPE.FILTER},this}},{key:"config",value:function(t){if(!t)return this;var n=e.parseParam(t);return this._configs.push({fn:n.fn,inject:n.inject,type:e.CONST.TYPE.CONFIG}),this}},{key:"run",value:function(t){if(!t)return this;var n=e.parseParam(t);return this._runs.push({fn:n.fn,inject:n.inject,type:e.CONST.TYPE.RUN}),this}},{key:"controller",value:function(){return this}},{key:"directive",value:function(){return this}}],[{key:"parseParam",value:function(e){var t=void 0,n=[];return Array.isArray(e)?e.every(function(e){return"function"==typeof e?(t=e,!1):("string"==typeof e&&n.push(e),!0)}):t=e,{fn:t,inject:n}}},{key:"getFilterName",value:function(t){return t=t||"",e.CONST.FILTER_NAME+t[0].toUpperCase()+t.substr(1)}}]),e}();e.CONST={PROVIDER_NAME:"Provider",FILTER_NAME:"$filter",TYPE:{PROVIDER:1,SERVICE:2,FACTORY:3,CONSTANT:4,VALUE:5,FILTER:6,CONFIG:7,RUN:8}};var t=function(){function t(){var e=this;_classCallCheck(this,t),this._modules=[],this._modulesObj={},this._CONST={MODULE_SEPARATOR:"::"},document.addEventListener("DOMContentLoaded",function(){e._domLoad()})}return _createClass(t,[{key:"_domLoad",value:function(){var e=this,t=[],n=[];this._modules.forEach(function(r){var o=!1,i=r.getDependencies();i.every(function(t){return t in e._modulesObj?!0:(console.error("Module '"+e._name+"' dependency '"+t+"' not found!"),o=!0,!1)}),o||(t=t.concat(r.getConfigs()),n=n.concat(r.getRuns()))}),t.forEach(function(t){e.run(t,!0)}),n.forEach(function(t){e.run(t)})}},{key:"_getObject",value:function(e){var t=null,n="",r="";if(-1!=e.indexOf(this._CONST.MODULE_SEPARATOR)){var o=e.split(this._CONST.MODULE_SEPARATOR);if(2!=o.length)return console.error("Get object "+e+" error! Wrong module separator use."),null;n=o[0],r=o[1]}else r=e;return this._modules.every(function(e){var o=e.getObjects();return n?e.getName()!=n?!0:r in o?(t=o[r],!1):(console.error("Get object "+r+" error! Cannot find object in the module "+n+"."),!1):r in o?(t=o[r],!1):!0}),t}},{key:"noop",value:function(){}},{key:"run",value:function(t,n,r){var o=this;if(r=r||[],-1!=r.indexOf(t.name))return console.error("Circular dependency error! Object name: "+t.name+", parents: "+r.join("|")),null;var i=[];if(t.provider){var c=this._getObject(t.provider);if(!c.cache){var a=c.fn||this.noop;c.cache=new a}var s=c.cache.$get||this.noop,u=e.parseParam(s);t.fn=u.fn,t.inject=u.inject,delete t.provider}if(t.inject&&t.inject.length&&t.inject.forEach(function(e){if("string"==typeof e){var c=o._getObject(e);c?i.push(o.run(c,n,t.name?r.concat(t.name):r)):(console.error("Object name: "+e+" not found!"),i.push(null))}else"object"===("undefined"==typeof e?"undefined":_typeof(e))&&i.push(e)}),n)switch(t.type){case e.CONST.TYPE.PROVIDER:if(!t.cache){var l=t.fn||this.noop;t.cache=new l}return t.cache;case e.CONST.TYPE.CONSTANT:return t.cache;case e.CONST.TYPE.CONFIG:var f=t.fn||this.noop;return f.apply(f,i);default:return null}else switch(t.type){case e.CONST.TYPE.FACTORY:case e.CONST.TYPE.FILTER:if(!t.cache){var h=t.fn||this.noop;t.cache=h.apply(h,i)}return t.cache;case e.CONST.TYPE.SERVICE:if(!t.cache){var p=t.fn||this.noop,y=Object.create(p.prototype);p.apply(y,i),t.cache=y}return t.cache;case e.CONST.TYPE.VALUE:return t.cache;case e.CONST.TYPE.CONSTANT:return t.cache;case e.CONST.TYPE.RUN:var v=t.fn||this.noop;return v.apply(v,i);default:return null}}},{key:"addModule",value:function(t,n){var r=new e(t,n);return this._modulesObj[t]=r,this._modules.push(r),r}}]),t}(),n=new t,r=n.addModule("onix");return r.module=function(e,t){return n.addModule(e,t)},r.noop=n.noop,r.info=function(){console.log("OnixJS framework\n2.7.0/1. 7. 2016\nsource: https://gitlab.com/LorDOniX/onix\ndocumentation: https://gitlab.com/LorDOniX/onix/tree/master/docs\n@license MIT\n- Free for use in both personal and commercial projects\n")},r.factory("$di",function(){return{parseParam:e.parseParam,getFilterName:e.getFilterName,run:function(t){return t?(t.fn||(t.fn=function(){}),t.type=e.CONST.TYPE.RUN,n.run(t)):null}}}),r}(),onix.factory("$filter",["$di",function(e){return function(t){var n=function(e){return e||""};return t?e.run({fn:function(e){return e||n},inject:[e.getFilterName(t)]}):n}}]);